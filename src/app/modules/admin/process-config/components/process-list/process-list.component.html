<div class="w-full h-full">
    <div class="w-full pb-4 border-b mb-4">
        <h1 class="text-2xl font-bold">Danh sách tiến trình</h1>
    </div>
    <mat-accordion #accordion>
        <mat-expansion-panel class="mb-5" (closed)="closeGroup(item.key)" (opened)="openGroup(item.key)" *ngFor="let item of lstProcess">
            <mat-expansion-panel-header>
                <mat-panel-title class="flex flex-row gap-6 items-center">
                    <p class="text-lg font-bold">{{item.processName}}</p>
                    <div class="uppercase rounded-2xl font font-bold text-xs py-1 px-2" [ngClass]="statusColorClass(item.status)">
                        <span>{{item.statusName}}</span>
                    </div>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-slide-toggle (change)="onOnOffProcess($event, item)" color="primary" [checked]="item.status == 1">{{admProcessConfigStatusBtnTextMap[item.status]}}</mat-slide-toggle>
            <table class="w-full" mat-table [dataSource]="mapListProcessScheduler.get(item.key)">
                <ng-container matColumnDef="start">
                    <th mat-header-cell *matHeaderCellDef> Thời gian bắt đầu </th>
                    <td mat-cell *matCellDef="let element"> {{element.start | datetimeformat : 'DD/MM/YYYY HH:mm:ss'}} </td>
                </ng-container>

                <ng-container matColumnDef="end">
                    <th mat-header-cell *matHeaderCellDef> Thời gian kết thúc </th>
                    <td mat-cell *matCellDef="let element"> {{element.end | datetimeformat : 'DD/MM/YYYY HH:mm:ss'}} </td>
                </ng-container>

                <ng-container matColumnDef="time">
                    <th mat-header-cell *matHeaderCellDef> Tổng thời gian chạy </th>
                    <td mat-cell *matCellDef="let element"> {{element.time}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator #processListPaginator
                [pageSizeOptions]="pageSizeOptions"
                [pageSize]="processListPageSize"
                [length]="mapListProcessScheduler.get(item.key)?.data?.length"
                (page)="handlePageSwitch($event, item.key)"
                showFirstLastButtons="true"
            >
            </mat-paginator>
        </mat-expansion-panel>
    </mat-accordion>
</div>
