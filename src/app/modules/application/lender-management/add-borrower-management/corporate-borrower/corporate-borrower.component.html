<form class="flex flex-col flex-auto"
      [formGroup]="businessForm">
    <!-- <div class="flex justify-center text-2xl font-bold uppercase mb-4">
        Tạo mới bên huy động vốn là doanh nghiệp
    </div> -->

    <!-- Info Login -->
    <div class="flex flex-col p-4 border rounded-md mb-6">
        <strong class="mb-4 text-xl">Thông tin tài khoản đăng nhập</strong>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 sm:gap-4 gap-0">
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Tên tài khoản</mat-label>
                <input id="accountName"
                       matInput
                       placeholder="Nhập..."
                       maxlength="50"
                       autocomplete="new-username"
                       formControlName="accountName"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('accountName').invalid">
                    {{ getErrorAccount() | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Mật khẩu</mat-label>
                <input id="passwd"
                       matInput
                       placeholder="Nhập..."
                       maxlength="50"
                       type="password"
                       autocomplete="new-password"
                       formControlName="passwd"
                       #passwordField
                       trim="blur">
                <button mat-icon-button
                        type="button"
                        (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                        matSuffix>
                    <mat-icon class="icon-size-5"
                              *ngIf="passwordField.type === 'password'"
                              [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                    <mat-icon class="icon-size-5"
                              *ngIf="passwordField.type === 'text'"
                              [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                </button>
                <mat-error *ngIf="!!getErrorPassword()">
                    {{ getErrorPassword() | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>SĐT liên hệ</mat-label>
                <input id="mobile"
                       matInput
                       placeholder="Nhập..."
                       inputMask
                       maskType="number"
                       maxlength="11"
                       formControlName="mobile"
                       trim="blur">
                <mat-error *ngIf="!!getErrorMobile('mobile')">
                    {{ getErrorMobile('mobile') | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Email</mat-label>
                <input matInput
                       id="email"
                       placeholder="Nhập..."
                       formControlName="email"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('email')?.hasError('email')">
                    {{ 'QLVV019' | transloco }}
                </mat-error>
                <mat-error *ngIf="businessForm.get('email')?.hasError('maxlength')">
                    {{ 'QLVV019' | transloco }}
                </mat-error>
                <mat-error *ngIf="businessForm.get('email')?.hasError('required')">
                    {{ 'QLVV020' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Nhân viên phụ trách</mat-label>
                <mat-select placeholder="Chọn..." formControlName="manageStaff">
                    <mat-option *ngFor="let item of lstManagerStaff"
                                [value]="item.admAccountDetailId">{{ item.fullName }}</mat-option>
                </mat-select>
                <mat-error *ngIf="businessForm.get('manageStaff').hasError('required')">
                    {{ 'QLDT136' | transloco }}
                </mat-error>
            </mat-form-field>
        </div>
    </div>

    <!-- Info  -->
    <div class="flex flex-col p-4 border rounded-md mb-6">
        <strong class="mb-4 text-xl">Thông tin Doanh nghiệp</strong>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4">
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Tên công ty</mat-label>
                <input id="fullname"
                       matInput
                       maxlength="200"
                       placeholder="Nhập..."
                       formControlName="fullName"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('fullName')?.hasError('required')">
                    {{ 'QLVV067' | transloco }}
                </mat-error>
                <mat-error *ngIf="businessForm.get('fullName')?.hasError('maxlength')">
                    {{ 'QLVV066' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>MST doanh nghiệp</mat-label>
                <input id="businessCode"
                       matInput
                       placeholder="Nhập..."
                       maxlength="30"
                       formControlName="businessCode"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('businessCode')?.hasError('required')">
                    {{ 'QLVV080' | transloco }}
                </mat-error>
                <mat-error *ngIf="businessForm.get('businessCode')?.hasError('maxlength')">
                    {{ 'QLVV079' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>SĐT liên hệ</mat-label>
                <input id="landline"
                       matInput
                       placeholder="Nhập..."
                       maxlength="11"
                       formControlName="landline"
                       trim="blur">
                <mat-error *ngIf="!!getErrorMobile('landline')">
                    {{ getErrorMobile('landline') | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Lĩnh vực hoạt động</mat-label>
                <mat-select placeholder="Chọn..." formControlName="admCategoriesId" disableOptionCentering panelClass="searchSelectPanel">
                    <input
                        class="input-search-mat-select"
                        (keydown)="$event.stopPropagation(); onKey($event.target)"
                        #mySearch
                    >
                    {{ mySearch?.focus() }}
                    <mat-option *ngIf="businessAreasFilter.length === 0">Không có dữ liệu</mat-option>
                    <mat-option *ngFor="let item of businessAreasFilter"
                                [value]="item.id">{{ item.label }}</mat-option>
                </mat-select>
                <mat-error *ngIf="businessForm.get('admCategoriesId')?.hasError('required')">
                    {{ 'QLVV069' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>GPKD số</mat-label>
                <input id="businessLicense"
                       matInput
                       placeholder="Nhập..."
                       maxlength="13"
                       formControlName="businessLicense"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('businessLicense')?.hasError('required')">
                    {{ 'QLVV072' | transloco }}
                </mat-error>
                <mat-error *ngIf="businessForm.get('businessLicense')?.hasError('maxlength')">
                    {{ 'QLVV071' | transloco }}
                </mat-error>
            </mat-form-field>
            <app-date-picker
                label="Ngày cấp"
                [maxDate]="{'days': 0}"
                formControlName="businessLicenseDate"
                requiredMsg="QLVV074"
                fomatMsg="QLVV076"
                maxMsg="QLVV075"
                [isRequired]="true"
                [validationType]="['today']"
            >
            </app-date-picker>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Nơi cấp</mat-label>
                <input id="placeOfBusinessLicense"
                       matInput
                       placeholder="Nhập..."
                       maxlength="100"
                       formControlName="placeOfBusinessLicense"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('placeOfBusinessLicense')?.hasError('required')">
                    {{ 'QLVV078' | transloco }}
                </mat-error>
                <mat-error *ngIf="businessForm.get('placeOfBusinessLicense')?.hasError('maxlength')">
                    {{ 'QLVV077' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Website</mat-label>
                <input id="website"
                        placeholder="Nhập..."
                       matInput
                       maxlength="200"
                       formControlName="website"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('website')?.hasError('maxlength')">
                    {{ 'QLVV070' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Facebook</mat-label>
                <input id="facebook"
                       matInput
                       placeholder="Nhập..."
                       maxlength="100"
                       formControlName="facebook"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('facebook')?.hasError('maxlength')">
                    {{ 'maxLength' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Địa chỉ theo GPKD</mat-label>
                <input id="address3"
                placeholder="Nhập..."
                       matInput
                       formControlName="address3"
                       readonly
                       (click)="choseAddress('address3')"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('address3')?.hasError('required')">
                    {{ 'QLVV083' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Địa chỉ hoạt động</mat-label>
                <input id="address2"
                       matInput
                       placeholder="Nhập..."
                       formControlName="address2"
                       readonly
                       (click)="choseAddress('address2')"
                       trim="blur">
                <mat-error *ngIf="businessForm.get('address2')?.hasError('required')">
                    {{ 'QLVV084' | transloco }}
                </mat-error>
            </mat-form-field>
            <app-dropzone
                inputId="photoOfBusiness"
                styleClass="h-[48px] mt-[3px]"
                [maxFile]="1"
                topTitle="Ảnh giấy phép kinh doanh"
                title="Ảnh giấy phép kinh doanh *"
                [formGroup]="businessForm"
                field="photoOfBusiness"
                [isRequired]="true"
                maxFileSize="5"
                requiredMsg="QLVV085"
                sizeMsg="QLVV086"
                typeMsg="QLVV088"
            ></app-dropzone>
        </div>
    </div>


    <!-- Personal Representative Info -->
    <div class="flex flex-col p-4 border rounded-md mb-6"
         formGroupName="deputyContact">
        <strong class="mb-4 text-xl">Thông tin Người đại diện doanh nghiệp</strong>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4">
            <div class="row-span-1 col-span-2 md:row-span-3 md:col-span-1 mb-4 sm:mb-0">
                <app-dropzone
                    [hasPreview]="true"
                    title="Ảnh đại diện"
                    styleClass="justify-center w-full h-50 sm:h-full"
                    [formGroup]="businessForm"
                    field="deputyContact.avatar"
                    [maxFile]="1"
                    accept="image/png, image/jpg, image/jpeg"
                >
                </app-dropzone>
            </div>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Họ và tên</mat-label>
                <input id="deputy-fullName"
                       matInput
                       placeholder="Nhập..."
                       maxlength="100"
                       formControlName="fullName"
                       trim="blur">
                <mat-error *ngIf="deputyContactForm?.get('fullName')?.hasError('required')">
                    {{ 'QLVV093' | transloco }}
                </mat-error>
                <mat-error *ngIf="deputyContactForm?.get('fullName')?.hasError('maxlength')">
                    {{ 'QLVV092' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>CCCD/Hộ chiếu</mat-label>
                <input id="identification"
                       matInput
                       placeholder="Nhập..."
                       maxlength="12"
                       formControlName="identification"
                       trim="blur">
                <mat-error
                    *ngIf="deputyContactForm?.get('identification')?.hasError('required')">
                    {{ 'QLVV094' | transloco }}
                </mat-error>
                <mat-error
                    *ngIf="deputyContactForm?.get('identification')?.hasError('maxlength')">
                    {{ 'QLVV095' | transloco }}
                </mat-error>
            </mat-form-field>
            <app-date-picker
                label="Ngày cấp"
                [maxDate]="{'days': 0}"
                formControlName="idDate"
                [validationType]="['today']"
                [isRequired]="true"
                requiredMsg="QLVV097"
                fomatMsg="QLVV098"
            >
            </app-date-picker>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Nơi cấp</mat-label>
                <input id="idAddress"
                       matInput
                       placeholder="Nhập..."
                       formControlName="idAddress"
                       trim="blur">
                <mat-error
                    *ngIf="deputyContactForm?.get('idAddress')?.hasError('required')">
                    {{ 'QLVV100' | transloco }}
                </mat-error>
                <mat-error
                    *ngIf="deputyContactForm?.get('idAddress')?.hasError('maxlength')">
                    {{ 'QLVV099' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Giới tính</mat-label>
                <mat-select placeholder="Chọn..." formControlName="gender">
                    <mat-option *ngFor="let item of genders"
                                [value]="item.id">{{ item.label }}</mat-option>
                </mat-select>
                <mat-error *ngIf="deputyContactForm?.get('gender')?.hasError('required')">
                    {{ 'QLVV102' | transloco }}
                </mat-error>
            </mat-form-field>
            <app-date-picker
                label="Ngày sinh"
                [maxDate]="{'months': -216}"
                formControlName="dateOfBirth"
                [validationType]="['today']"
                [isRequired]="true"
                requiredMsg="QLVV105"
                fomatMsg="QLVV104"
                y18Msg="QLVV103"
                maxMsg="QLVV103"
            >
            </app-date-picker>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>MST cá nhân</mat-label>
                <input id="deputy-taxCode"
                       matInput
                       placeholder="Nhập..."
                       inputMask
                       maskType="number"
                       maxlength="13"
                       formControlName="taxCode"
                       trim="blur"
                       required="true"
                       requiredMsg="TKDT051"
                       >
                <mat-error *ngIf="deputyContactForm.get('taxCode').hasError('required')">
                    {{ 'TKDT051' | transloco }}
                </mat-error>
                <mat-error *ngIf="deputyContactForm?.get('taxCode')?.hasError('maxlength')">
                    {{ 'QLVV114' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>SĐT liên hệ</mat-label>
                <input id="deputy-mobile"
                       matInput
                       inputMask
                       maskType="number"
                       placeholder="Nhập..."
                       maxlength="11"
                       formControlName="mobile"
                       trim="blur">
                <mat-error *ngIf="!!getErrorMobileDeputy()">
                    {{ getErrorMobileDeputy() | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Email</mat-label>
                <input id="deputy-email"
                       matInput
                       placeholder="Nhập..."
                       formControlName="email"
                       trim="blur">
                <mat-error *ngIf="deputyContactForm?.get('email')?.hasError('email')">
                   {{ 'QLVV111' | transloco }}
                </mat-error>
                <mat-error *ngIf="deputyContactForm?.get('email')?.hasError('maxlength')">
                   {{ 'QLVV109' | transloco }}
                </mat-error>
                <mat-error *ngIf="deputyContactForm?.get('email')?.hasError('required')">
                   {{ 'QLVV110' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Chức vụ</mat-label>
                <input id="positionCompany"
                       maxlength="100"
                       matInput
                       placeholder="Nhập..."
                       formControlName="positionCompany"
                       trim="blur">
                <mat-error
                    *ngIf="deputyContactForm?.get('positionCompany')?.hasError('required')">
                    {{ 'QLVV113' | transloco }}
                </mat-error>
                <mat-error
                    *ngIf="deputyContactForm?.get('positionCompany')?.hasError('maxlength')">
                    {{ 'QLVV112' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Facebook</mat-label>
                <input id="deputy-facebook"
                       matInput
                       placeholder="Nhập..."
                       maxlength="200"
                       formControlName="facebook"
                       trim="blur">
                <mat-error
                    *ngIf="deputyContactForm?.get('facebook')?.hasError('maxlength')">
                    {{ 'QLVV115' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Địa chỉ thường trú</mat-label>
                <input id="deputy-address1"
                       matInput
                       placeholder="Nhập..."
                       formControlName="address1"
                       readonly
                       (click)="choseAddress('deputy-address1')"
                       trim="blur">
                <mat-error *ngIf="deputyContactForm?.get('address1')?.hasError('required')">
                    {{ 'QLVV116' | transloco }}
                </mat-error>
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Địa chỉ hiện tại</mat-label>
                <input id="deputy-address2"
                       matInput
                       placeholder="Nhập..."
                       formControlName="address2"
                       readonly
                       (click)="choseAddress('deputy-address2')"
                       trim="blur">
                <mat-error *ngIf="deputyContactForm?.get('address2')?.hasError('required')">
                    {{ 'QLVV117' | transloco }}
                </mat-error>
            </mat-form-field>
            <div class="col-span-2">
                <app-dropzone
                    inputId="dFrontPhotoIdentication"
                    styleClass="h-[48px] mt-[3px]"
                    [maxFile]="1"
                    topTitle="Ảnh CCCD/Hộ chiếu mặt trước"
                    title="Ảnh CCCD/Hộ chiếu mặt trước *"
                    [formGroup]="businessForm"
                    field="deputyContact.frontPhotoIdentication"
                    [isRequired]="true"
                    requiredMsg="QLVV121"
                    typeMsg="QLVV118"
                    sizeMsg="QLVV119"
                ></app-dropzone>
            </div>
            <div class="col-span-2">
                <app-dropzone
                    inputId="dBacksitePhotoIdentication"
                    styleClass="h-[48px] mt-[3px]"
                    [maxFile]="1"
                    topTitle="Ảnh CCCD/Hộ chiếu mặt sau"
                    title="Ảnh CCCD/Hộ chiếu mặt sau *"
                    [formGroup]="businessForm"
                    field="deputyContact.backsitePhotoIdentication"
                    [isRequired]="true"
                    requiredMsg="QLVV125"
                    typeMsg="QLVV122"
                    sizeMsg="QLVV123"
                ></app-dropzone>
            </div>
        </div>
    </div>

    <!-- Another Info -->
    <div class="flex flex-col p-4 border rounded-md">
        <strong class="mb-4 text-xl">Thông tin khác</strong>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4">
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Ngày tạo</mat-label>
                <input id="createdDate"
                       matInput
                       formControlName="createdDate"
                       trim="blur">
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Người tạo</mat-label>
                <input id="createdByName"
                       matInput
                       formControlName="createdByName"
                       trim="blur">
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Ngày cập nhật</mat-label>
                <input id="lastUpdatedDate"
                       matInput
                       formControlName="lastUpdatedDate"
                       trim="blur">
            </mat-form-field>
            <mat-form-field class="w-full" floatLabel="always">
                <mat-label>Người cập nhật</mat-label>
                <input id="lastUpdatedByName"
                       matInput
                       formControlName="lastUpdatedByName"
                       trim="blur">
            </mat-form-field>
        </div>
    </div>
</form>
