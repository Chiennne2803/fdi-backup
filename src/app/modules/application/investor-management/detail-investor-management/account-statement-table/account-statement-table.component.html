<div @fadeOutTop @slideInTop class="mb-5" *ngIf="checkDisplayBtnExport">
    <button mat-flat-button color="primary" (click)="onExportTrans()">
        <mat-icon class="mr-2">check</mat-icon>
        Export
    </button>
</div>
<table mat-table [dataSource]="dataSource" class="w-full">
    <ng-container matColumnDef="select">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null"
                [checked]="selectionTransactionHistory.hasValue() && isAllSelected()"
                [indeterminate]="selectionTransactionHistory.hasValue() && !isAllSelected()" color="primary">
            </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()"
                (change)="$event ? selectionTransactionHistory.toggle(row) : null"
                [checked]="selectionTransactionHistory.isSelected(row)" color="primary">
            </mat-checkbox>
        </td>
    </ng-container>
    <ng-container matColumnDef="transDate">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <div class="cell-overflow table-header">
                Thời gian giao dịch
            </div>
        </th>
        <td mat-cell *matCellDef="let element">
            <div class="cell-overflow">
                {{ element.transDate | datetimeformat : 'DD/MM/YYYY' }}
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="amount">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <div class="cell-overflow table-header">
                Số tiền giao dịch(VND)
            </div>
        </th>
        <td mat-cell *matCellDef="let element">
            <div class="cell-overflow">
                <span class="font-semibold" [ngClass]="{
                    'text-[#16a34a]': element.newAmount > element.oldAmount,
                    'text-[#ef4444]': element.newAmount < element.oldAmount,
                    'text-gray-500': element.newAmount === element.oldAmount
                }">
                    {{ element.newAmount > element.oldAmount ? '+' : element.newAmount < element.oldAmount ? '-' : '' }}
                        {{ (element.amount ?? element.newAmount) | currencyFormatPipe:10 }} </span>

                        <!-- {{ element.amount | currencyFormatPipe : 10 }} -->
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="transTypeName">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <div class="cell-overflow table-header">
                Loại giao dịch
            </div>
        </th>
        <td mat-cell *matCellDef="let element">
            <div class="cell-overflow">
                {{ element.transTypeName }}
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="fsLoanProfilesId">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <div class="cell-overflow table-header">
                Số hồ sơ
            </div>
        </th>
        <td mat-cell *matCellDef="let element">
            <div class="cell-overflow">
                {{ element.fsLoanProfilesId }}
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="transCode">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <div class="cell-overflow table-header">
                Mã giao dịch
            </div>
        </th>
        <td mat-cell *matCellDef="let element">
            <div class="cell-overflow">
                {{ element.transCode}}
            </div>
        </td>
    </ng-container>
    <ng-container matColumnDef="newAmount">
        <th class="bg-primary-grayNeutral-5" mat-header-cell *matHeaderCellDef>
            <div class="cell-overflow table-header">
                Số dư khả dụng tại thời điểm(VND)
            </div>
        </th>
        <td mat-cell *matCellDef="let element">
            <div class="cell-overflow">
                {{ element.newAmount | currencyFormatPipe : 10 }}
            </div>
        </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="[
                                            'select',
                                            'transDate',
                                            'amount',
                                            'transTypeName',
                                            'fsLoanProfilesId',
                                            'transCode',
                                            'newAmount',
                                             ]"></tr>
    <tr mat-row *matRowDef="let row; columns: [
                                            'select',
                                            'transDate',
                                            'amount',
                                            'transTypeName',
                                            'fsLoanProfilesId',
                                            'transCode',
                                            'newAmount',
                                                ];" class="hover:bg-accent-50 hover:cursor-pointer"></tr>
</table>
<mat-paginator #transHistoryPaginator [pageSizeOptions]="pageSizeOptions" [length]="dataSource?.data?.length"
    [pageSize]="transHistoryPageSize" [showFirstLastButtons]="true">
</mat-paginator>