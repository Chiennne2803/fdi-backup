<!-- Logo -->
<div class="w-[30%]">
    <img src="assets/images/logo/logo-auth.svg">
</div>
<!-- Promo banner -->
<div
    class="promo-banner mt-3 flex items-center justify-center font-extrabold text-lg py-2 overflow-hidden relative bg-white">
    <div class="marquee">
        <div class="marquee__inner flex items-center gap-3 px-4 whitespace-nowrap">
            üéÅ
            <span class="promo-text uppercase tracking-wide">
                M·ªü t√†i kho·∫£n ngay ‚Äì Nh·∫≠n ti·ªÅn li·ªÅn tay
            </span>
            üéÅ
        </div>
        <!-- B·∫£n sao ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng n·ªëi li·ªÅn -->
        <div class="marquee__inner flex items-center gap-3 px-4 whitespace-nowrap" aria-hidden="true">
            üéÅ
            <span class="promo-text uppercase tracking-wide">
                M·ªü t√†i kho·∫£n ngay ‚Äì Nh·∫≠n ti·ªÅn li·ªÅn tay
            </span>
            üéÅ
        </div>
        <div class="marquee__inner flex items-center gap-3 px-4 whitespace-nowrap" aria-hidden="true">
            üéÅ
            <span class="promo-text uppercase tracking-wide">
                M·ªü t√†i kho·∫£n ngay ‚Äì Nh·∫≠n ti·ªÅn li·ªÅn tay
            </span>
            üéÅ
        </div>
    </div>
</div>

<!-- Title -->
<div class="mt-3 text-primary-blue">
    <div class="text-4xl font-extrabold tracking-tight leading-tight ">
        ƒêƒÉng k√Ω t√†i kho·∫£n
    </div>
    <div class="flex items-baseline mt-1 font-medium">
        <span class="text-[#848484]">T·∫°o t√†i kho·∫£n m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa ch√∫ng t√¥i.</span>
    </div>
</div>

<!-- Alert -->
<fuse-alert class="mt-4" *ngIf="showAlert" [appearance]="'outline'" [showIcon]="false" [type]="alert.type"
    [@shake]="alert.type === 'error'">
    {{alert.message}}
</fuse-alert>

<!-- Sign Up form -->
<form class="mt-4 flex flex-col flex-auto" [formGroup]="signUpForm">

    <!-- Your are field -->
    <div class="grid grid-cols-1 sm:grid-cols-2 sm:gap-x-3 gap-y-0">
        <mat-form-field floatLabel="always" class="w-full">
            <mat-label>Vai tr√≤ c·ªßa b·∫°n?</mat-label>
            <mat-select formControlName="role" (selectionChange)="changeObjType()" placeholder="B·∫°n l√† ai">
                <mat-option *ngFor="let item of roles" [value]="item.id">{{ item.value }}</mat-option>
            </mat-select>

            <mat-error *ngIf="signUpForm.get('role')?.hasError('required')">
                {{ 'DKTK001' | transloco }}
            </mat-error>
        </mat-form-field>


        <!-- Object field -->
        <mat-form-field floatLabel="always" class="w-full">
            <mat-label>ƒê·ªëi t∆∞·ª£ng</mat-label>
            <mat-select formControlName="object" placeholder="B·∫°n l√† ai">

                <mat-option *ngFor="let item of objects" [value]="item.id">{{ item.value }}</mat-option>
            </mat-select>
            <mat-error *ngIf="signUpForm.get('object')?.hasError('required')">
                {{ 'DKTK003' | transloco }}
            </mat-error>
        </mat-form-field>

        <!-- Username field -->
        <!-- <mat-form-field floatLabel="always" class="w-full">
            <mat-label>T√™n t√†i kho·∫£n</mat-label>
            <input matInput id="accountName" maxlength="50" trim="blur" formControlName="accountName"
                placeholder="Nh·∫≠p t√™n t√†i kho·∫£n...">
            
            <mat-error *ngIf="signUpForm.get('accountName').invalid">
                {{ getErrorKey('accountName') | transloco }}
            </mat-error>
        </mat-form-field> -->
        <div>
            <mat-form-field floatLabel="always" class="w-full">
                <mat-label>T√™n t√†i kho·∫£n</mat-label>
                <input matInput id="accountName" maxlength="50" trim="blur" formControlName="accountName"
                    placeholder="Nh·∫≠p t√™n t√†i kho·∫£n..." (focus)="isAccountFocused = true"
                    (blur)="isAccountFocused = false" />
                <!-- L·ªói -->
                <mat-error *ngIf="signUpForm.get('accountName')?.hasError('required')">
                    T√™n t√†i kho·∫£n kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng
                </mat-error>
            </mat-form-field>

            <!-- Rule tr·ª±c quan -->
            <div class="password-rules mb-2 text-md transition-all duration-200"
                *ngIf="isAccountFocused && signUpForm.get('accountName')?.invalid">

                <div [ngClass]="accountLengthValid? 'text-green-500' : 'text-[#dc2626]'">
                    √çt nh·∫•t c√≥ 6 k√Ω t·ª±
                </div>

                <div [ngClass]="accountCharValid ? 'text-green-500' : 'text-[#dc2626]'">
                    Kh√¥ng ch·ª©a k√Ω t·ª± ƒë·∫∑c bi·ªát (ngo√†i tr·ª´ @_.)
                </div>

                <div [ngClass]="accountNoAccent? 'text-green-500' : 'text-[#dc2626]'">
                    Kh√¥ng ch·ª©a d·∫•u ti·∫øng Vi·ªát
                </div>
            </div>
        </div>


        <!-- Password field -->
        <div>
            <mat-form-field floatLabel="always" class="w-full password-input">
                <mat-label>M·∫≠t kh·∫©u</mat-label>
                <input matInput id="passwd" type="password" maxlength="30" trim="blur" #passwordField formControlName="passwd"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." (focus)="isPassFocused = true" (blur)="isPassFocused = false" />
                <button mat-icon-button type="button"
                    (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                    matSuffix>
                    <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'"
                        [svgIcon]="'heroicons_outline:eye-off'"></mat-icon>
                    <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'"
                        [svgIcon]="'heroicons_outline:eye'"></mat-icon>
                </button>
                <mat-error *ngIf="signUpForm.get('passwd').invalid"> {{ getErrorPassword() | transloco }} </mat-error>
            </mat-form-field>

            <!-- ‚úÖ C√°c rule hi·ªÉn th·ªã tr·ª±c quan -->
            <div class="password-rules mb-1 text-md transition-all duration-200"
                *ngIf="isPassFocused && !( hasMinLength && hasLowerCase && hasUpperCase && hasSpecialChar)">
                <div [ngClass]="hasMinLength ? 'text-green-500' : 'text-[#dc2626]'">
                    √çt nh·∫•t c√≥ 8 k√Ω t·ª±
                </div>
                <div [ngClass]="hasLowerCase ? 'text-green-500' : 'text-[#dc2626]'">
                    C√≥ √≠t nh·∫•t m·ªôt ch·ªØ vi·∫øt th∆∞·ªùng
                </div>
                <div [ngClass]="hasUpperCase ? 'text-green-500' : 'text-[#dc2626]'">
                    C√≥ √≠t nh·∫•t m·ªôt ch·ªØ vi·∫øt hoa
                </div>
                <div [ngClass]="hasSpecialChar ? 'text-green-500' : 'text-[#dc2626]'">
                    C√≥ √≠t nh·∫•t m·ªôt k√Ω t·ª± ƒë·∫∑c bi·ªát (!@#$%^&*?)
                </div>
            </div>
        </div>

        <!-- <app-password-input [control]="signUpForm.get('passwd')" label="M·∫≠t kh·∫©u" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." [required]="true"></app-password-input> -->
        <!-- Email field -->
        <mat-form-field floatLabel="always" class="w-full">
            <mat-label>T√†i kho·∫£n email</mat-label>
            <input matInput id="email" [maxlength]="50" formControlName="email" trim="blur"
                placeholder="Nh·∫≠p t√†i kho·∫£n email...">
            <!-- <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:mail'"></mat-icon> -->
            <mat-error *ngIf="signUpForm.get('email')?.hasError('invalidEmail')">
                {{ 'DKTK009' | transloco }}
            </mat-error>
            <mat-error *ngIf="signUpForm.get('email')?.hasError('required')">
                Email kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng
            </mat-error>
        </mat-form-field>

        <!-- Phone number field -->
        <mat-form-field floatLabel="always" class="w-full">
            <mat-label>S·ªë ƒëi·ªán tho·∫°i</mat-label>
            <input matInput id="mobile" [maxlength]="11" [minLength]="10" inputMask maskType="number"
                formControlName="mobile" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i...">
            <!-- <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:phone'"></mat-icon> -->
            <mat-error *ngIf="signUpForm.get('mobile').invalid">
                {{ getErrorMobile() | transloco }}
            </mat-error>
        </mat-form-field>
        <!-- Refer field -->
        <mat-form-field floatLabel="always" class="w-full">
            <mat-label>T√†i kho·∫£n gi·ªõi thi·ªáu(n·∫øu c√≥)</mat-label>
            <input matInput id="reference" formControlName="codePresenter" [maxlength]="50" trim="blur"
                placeholder="Nh·∫≠p t√™n ng∆∞·ªùi gi·ªõi thi·ªáu...">
        </mat-form-field>
        <mat-form-field floatLabel="always" class="w-full">
            <mat-label>T√†i kho·∫£n nh√¢n vi√™n gi·ªõi thi·ªáu(n·∫øu c√≥)</mat-label>
            <input matInput id="codeStaff" formControlName="codeStaff" [maxlength]="50" [minLength]="1" trim="blur"
                placeholder="Nh·∫≠p t√™n nh√¢n vi√™n gi·ªõi thi·ªáu...">
        </mat-form-field> 
    </div>
    <!-- ToS and PP -->
    <div class="inline-flex items-end w-full mt-1.5 py-2 z-10">
        <mat-checkbox id="agreements" [required]="true" [color]="'primary'" formControlName="agreements">
            <span class="ml-2">
                <span>B·∫±ng vi·ªác ƒëƒÉng k√Ω t√†i kho·∫£n, b·∫°n ƒë√£ ƒë·ªìng √Ω v·ªõi </span>
                <button class="text-[#339FFF] hover:underline" type="button" (click)="downloadRulesDoc()">ƒêi·ªÅu kho·∫£n
                    d·ªãch
                    v·ª• </button>
                <span> v√† </span>
                <button class="text-[#339FFF] hover:underline" type="button" (click)="downloadSecurityDoc()">ChiÃÅnh
                    saÃÅch
                    baÃâo
                    m√¢Ã£t</button>
                <span> c·ªßa ch√∫ng t√¥i </span>

            </span>
        </mat-checkbox>
    </div>

    <!-- Submit button -->
    <button class="fuse-mat-button-large w-full mt-4" mat-flat-button [color]="'primary'"
        [disabled]="signUpForm.disabled || signUpForm.get('agreements').invalid" (click)="signUp()">
        <span *ngIf="!signUpForm.disabled">
            ƒêƒÉng k√Ω
        </span>
        <mat-progress-spinner *ngIf="signUpForm.disabled" [diameter]="24"
            [mode]="'indeterminate'"></mat-progress-spinner>
    </button>
    <!-- Form footer -->
    <div class="my-4 text-md text-center font-medium ">
        <span>B·∫°n ƒë√£ c√≥ t√†i kho·∫£n?</span>
        <a class="ml-1 text-primary-orange-1 hover:underline" [routerLink]="['/sign-in']">ƒêƒÉng nh·∫≠p ngay
        </a>
    </div>
</form>